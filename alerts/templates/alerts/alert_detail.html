<!-- alerts/templates/alerts/alert_detail.html -->
{% extends "alerts/base.html" %}
{% load static %}
{% load date_format_tags %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'alerts/css/alert_detail.css' %}">
<link rel="stylesheet" href="{% static 'alerts/css/comments.css' %}">
{% endblock %}

{% block title %}{{ alert.name }} - SentryHub{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <!-- Alert Header -->
    {% include 'alerts/partials/alert_header.html' %}
    
    <!-- Alert Tabs -->
    {% include 'alerts/partials/alert_tabs.html' %}
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'alerts/js/alert_detail.js' %}"></script>
<script src="{% static 'alerts/js/comments.js' %}"></script>

{# Add JS for silence button, similar to alert_list.html #}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Basic example for handling the "Silence" button click in the header
    // It relies on the href attribute containing the labels query parameter
    const silenceButton = document.querySelector('.card-body .btn-silence'); // Target button within header card body
    if (silenceButton) {
        silenceButton.addEventListener('click', function(event) {
            // Default behavior redirects to the create form with labels pre-filled via GET params.
            console.log('Silence button clicked in detail view, redirecting to create form with labels.');
            // If a modal approach is preferred later, preventDefault() and trigger modal here.
        });
    }
});
</script>
{% endblock %}
